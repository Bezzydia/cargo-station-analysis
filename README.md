# 🚂 Анализ работы железнодорожной станции

## 📖 Содержание
- [Обзор](#обзор)
- [Постановка задачи](#постановка-задачи)
- [Функции](#функции)
- [Установка](#установка)
- [Использование](#использование)
- [Методы анализа](#методы-анализа)
- [Визуализация результатов](#визуализация-результатов)
- [Основные выводы](#основные-выводы)
- [Требования](#требования)
- [Структура проекта](#структура-проекта)


## 📋 Описание проекта

Этот проект выполняет комплексный анализ операционной деятельности железнодорожной станции с целью выявления факторов, влияющих на простои вагонов, прогнозирования ключевых показателей и обнаружения аномальных ситуаций.

## 🎯 Постановка задачи

Грузовую станцию можно представить как **систему массового обслуживания** с тремя взаимозависимыми параметрами:

1. **Входной поток** – интенсивность прибытия вагонов
2. **Производительность** – объем рабочего парка (каналы обслуживания)  
3. **Очередь** – простой вагонов

Все эти параметры являются взаимозависимыми и определяющими эффективность станции.

### 🔄 Дисбаланс направлений

Станция условно разделена на две части:
- **Четная сторона** (с запада на восток)
- **Нечетная сторона** (с востока на запад)

Эксперты отмечают, что **дисбаланс между потоками** на четной и нечетной стороне ведет к уменьшению перерабатывающей способности станции.

## 📊 Формализованные метрики

### Основные метрики системы:
- **Дисбаланс направлений** = |Рабочий парк нечетный - Рабочий парк четный|
- **Интенсивность переработки** = Отправление общее / Рабочий парк  
- **Отношение прибытие/отправление** = Прибытие общее / Отправление общее

### Целевые переменные:
- **Простой факт** (основной показатель эффективности)
- **Рабочий парк** (объем обрабатываемых вагонов)

## 🔍 Частные задачи анализа

1. **Определение зависимостей** между параметрами станции (включая временные зависимости)
2. **Математическое выделение** основных параметров станции
3. **Прогнозирование аномалий**: 
   - Простой > 15 часов
   - Рабочий парк > 5000 вагонов
4. **Анализ временных закономерностей** увеличения критических показателей

## 🚀 Как запустить проект

### Вариант 1: Локальный запуск (Python)

Чтобы запустить этот проект локально, выполните следующие действия:

1. **Установите необходимые пакеты**:
    ```bash
    pip install -r requirements.txt
    ``` 
2. **Добавьте данные**:
    - Поместите файл `Входные_данные.xlsx` в папку `data/`
     
3. **Запустите анализ**:
    ```bash
    python main.py
    ```

### Вариант 2: Google Colab/Jupyter Notebook

1. **Добавьте данные**:
    - Загрузите файл `Входные_данные.xlsx` во вкладку "Files" в Google Colab
    - Или поместите файл в папку `data/` если используете Jupyter локально

2. **Откройте notebook**:
    - В Google Colab: загрузите файл `railway_analysis.ipynb`
    - В Jupyter: откройте `railway_analysis.ipynb` локально

3. **Запустите ячейки по порядку**:
    - Выполняйте ячейки сверху вниз кнопкой `Shift + Enter`

## 🛠️ Методы анализа

### 1. **Анализ временных рядов**
- Изучение динамики операционных показателей станции
- Выявление трендов и сезонности

### 2. **Корреляционный анализ**
- Определение факторов, влияющих на простои вагонов
- Поиск ключевых зависимостей между переменными

### 3. **Субтрактивная кластеризация**
- Группировка режимов работы станции по схожести показателей
- Выявление типичных паттернов работы

### 4. **Машинное обучение**
- **Ridge регрессия** - для точного прогнозирования простоя
- **Random Forest** - для анализа важности признаков
- **SVM классификатор** - для обнаружения аномальных ситуаций

### 5. **Нейронные сети (LSTM)**
- Прогнозирование временных рядов с учетом последовательностей

## 📊 Визуализация результатов

После запуска анализа в папке `results/figures/` появятся графики:

- **time_series.png** - временные ряды ключевых показателей
- **distributions.png** - распределение переменных
- **correlation_matrix.png** - матрица корреляций
- **clustering_results.png** - кластеризация режимов работы
- **anomaly_by_clusters.png** - распределение аномалий по кластерам

Результаты также доступны в Jupyter Notebook (в ячейках с графиками) и в отчете `results/analysis_report.md`.

## 📊 Основные выводы

### 🔑 Ключевые факторы простоя
- **Время сортировки** (t(c) - Сортировка) является доминирующим фактором простоя с корреляцией 0.937
- **Random Forest** показал, что время сортировки объясняет 87.5% вариации простоя
- **Дисбаланс направлений** негативно влияет на эффективность, хотя и не является основным фактором

### 📈 Прогнозирование
- **Прогнозирование простоя**: Ridge регрессия показала исключительную точность (R² = 0.9990, MAE = 0.08 часов)
- **Прогнозирование рабочего парка**: сложная задача (лучшая модель Gradient Boosting: R² = -0.3033, MAE = 427.24 вагона)
- **Временные зависимости**: автокорреляция рабочего парка выражена четко (лаг 3: 0.512)

### ⚠️ Аномалии
- **Четкие временные паттерны**: простой > 15 часов наблюдается в 52.3% данных (2286 случаев)
- **SVM-классификатор**: высокая точность обнаружения аномалий (F1-score = 0.91, Precision = 0.99, Recall = 0.84)

## 📋 Требования

- Python 3.7+
- Все зависимости указаны в `requirements.txt`

№№ 📂 Структура проекта
railway-analysis/
├── README.md
├── requirements.txt
├── main.py
├── railway_analysis.ipynb
├── data/
└── src/
